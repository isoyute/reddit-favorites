(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{139:function(t,e,r){},482:function(t,e,r){},483:function(t,e,r){},484:function(t,e,r){},485:function(t,e,r){"use strict";r.r(e);var n=r(0),c=r.n(n),s=r(20),i=r.n(s),o=r(13),a=r(10),u=function(){return Object(a.jsx)(o.Page.Header,{className:"header",children:Object(a.jsx)("h2",{children:"Reddit Favorites"})})},j=(r(139),function(){return Object(a.jsx)(o.Page.Footer,{className:"footer",children:Object(a.jsx)("p",{children:"Website created by Tudor Lupu"})})}),l=function(t){var e=t.children;return Object(a.jsxs)(o.Page,{size:"large",children:[Object(a.jsx)(u,{}),e,Object(a.jsx)(j,{})]})},d=r(21),b=r(31),f="SET_FAVORITES",O="ADD_FAVORITE",p="REMOVE_FAVORITE",h="SET_POSTS",v="GET_POSTS_REQUEST",x="GET_POSTS_SUCCESS",m="GET_POSTS_FAILURE",g="SET_POST_FAVORITE",S=function(t,e){return{type:g,payload:{postID:t,isFavorited:e}}},y=r(128),T=r.n(y),E=function(t){localStorage.setItem("favorites",JSON.stringify(t))},F=function(t){return function(e){e({type:f,favorites:t})}},w=function(t){return function(e,r){e(function(t){return{type:O,post:t}}(t)),e(S(t.id,!0)),E(r().favorites.posts)}},C=function(t){return function(e,r){e(function(t){return{type:p,postID:t}}(t)),e(S(t,!1)),E(r().favorites.posts)}},I=function(t){return function(e,r){e({type:v}),T.a.get("https://www.reddit.com/r/".concat(t,"/hot.json?limit=10")).then((function(t){return t.data})).then((function(t){return t.data.children.filter((function(t){return!t.data.stickied})).map((function(t){return{id:t.data.id,title:t.data.title,url:"https://www.reddit.com".concat(t.data.permalink),picture:t.data.thumbnail,isFavorited:!1}}))})).then((function(t){e(function(t){return{type:x,posts:t}}(t)),console.log(t),Object(b.a)(r().favorites.posts).forEach((function(t){return e(S(t.id,!0))}))})).catch((function(){return e({type:m,error:"Could not retrieve posts from subreddit. Check the spelling and try again!"})}))}},N=r(65),_=r(41),P=(r(482),function(){var t=Object(n.useState)(""),e=Object(N.a)(t,2),r=e[0],c=e[1],s=Object(d.c)((function(t){return t.results.error})),i=Object(d.b)();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.Row,{className:"search subreddit",children:Object(a.jsx)(o.Input,{value:r,onChange:function(t){return c(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&r&&i(I(r))},icon:Object(a.jsx)(_.Search,{}),placeholder:"subreddit's name",size:"large",width:"100%"})}),s&&Object(a.jsx)(o.Note,{type:"error",label:"error",filled:!0,children:"Could not retrieve posts from subreddit. Try again!"})]})}),R=r(16),k=(r(483),function(t){var e=t.post,r=Object(o.useToasts)(),n=Object(N.a)(r,2)[1],c=Object(d.b)(),s=e.picture&&"self"!==e.picture;return Object(a.jsx)(o.Row,{className:"search post",children:Object(a.jsx)(o.Card,{children:Object(a.jsxs)(o.Row,{align:"middle",children:[s&&Object(a.jsx)(o.Col,{className:"thumbnail",span:5,children:Object(a.jsx)("img",{src:e.picture,alt:"thumbnail"})}),Object(a.jsxs)(o.Col,{className:"content",span:s?18:23,children:[Object(a.jsx)("h4",{children:e.title}),Object(a.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:Object(a.jsx)("p",{children:e.url})})]}),Object(a.jsx)(o.Col,{span:1,children:Object(a.jsx)("span",{className:"favorite icon",onClick:function(){var t=!e.isFavorited;c(t?w(Object(R.a)(Object(R.a)({},e),{},{isFavorited:!0})):C(e.id)),n({text:t?"Post favorited.":"Post unfavorited.",type:t?"success":"error"})},children:e.isFavorited?Object(a.jsx)(_.HeartFill,{}):Object(a.jsx)(_.Heart,{})})})]})})})}),D=(r(484),function(t){var e=t.posts,r="favorites"===t.type,n=r?"list of favorites is empty":"nothing to see here.";return Object(a.jsx)(o.Row,{className:"search posts",justify:"center",children:e&&e.length>0?Object(a.jsxs)(o.Col,{children:[!r&&Object(a.jsxs)("p",{children:[e.length," posts found ..."]}),e.map((function(t){return Object(a.jsx)(k,{post:t},t.id)}))]}):Object(a.jsx)(o.Col,{className:"search not-found",children:n})})}),A=function(){var t=Object(d.c)((function(t){return t.results.posts})),e=Object(d.c)((function(t){return t.favorites.posts})),r=Object(d.c)((function(t){return t.results.isSearching})),c=Object(d.b)();return Object(n.useEffect)((function(){var t=localStorage.getItem("favorites");t&&c(F(JSON.parse(t)))}),[c]),Object(a.jsx)(o.Page.Content,{className:"content",children:Object(a.jsxs)(o.Tabs,{initialValue:"search",hideDivider:!0,children:[Object(a.jsxs)(o.Tabs.Item,{label:"Search",value:"search",children:[Object(a.jsx)(P,{}),r?Object(a.jsx)(o.Spinner,{size:"large"}):Object(a.jsx)(D,{posts:t})]}),Object(a.jsx)(o.Tabs.Item,{label:"Favorites",value:"favorites",children:Object(a.jsx)(D,{type:"favorites",posts:e})})]})})},V=function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(l,{children:Object(a.jsx)(A,{})})})},G=r(30),J=r(129),z={posts:[],error:null,isSearching:!1},H=function(t){return Object(R.a)(Object(R.a)({},z),{},{posts:t})},U=function(){return Object(R.a)(Object(R.a)({},z),{},{isSearching:!0})},B=function(t){return Object(R.a)(Object(R.a)({},z),{},{posts:t})},L=function(t){return Object(R.a)(Object(R.a)({},z),{},{error:t})},M=function(t,e,r){var n=Object(b.a)(t.posts).map((function(t){return t.id===e&&(t.isFavorited=r),t}));return Object(R.a)(Object(R.a)({},t),{},{posts:n})},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return H(e.posts);case v:return U();case x:return B(e.posts);case m:return L(e.error);case g:return M(t,e.payload.postID,e.payload.isFavorited);default:return t}},Q={posts:[]},W=function(t){return{posts:t}},q=function(t,e){return{posts:[].concat(Object(b.a)(t.posts),[e])}},X=function(t,e){return{posts:Object(b.a)(t.posts).filter((function(t){return t.id!==e}))}},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return W(e.favorites);case O:return q(t,e.post);case p:return X(t,e.postID);default:return t}},Z=Object(G.c)({results:K,favorites:Y}),$=Object(G.d)(Z,Object(G.a)(J.a));i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsxs)(o.GeistProvider,{themeType:"dark",children:[Object(a.jsx)(o.CssBaseline,{}),Object(a.jsx)(d.a,{store:$,children:Object(a.jsx)(V,{})})]})}),document.getElementById("root"))}},[[485,1,2]]]);
//# sourceMappingURL=main.9666426a.chunk.js.map